@startuml AlarmClockStateChart
skinparam monochrome true
skinparam state {
    FontName Helvetica
    FontSize 14
}

[*] --> Uninitialized

state Uninitialized {
    [*] --> SettingHour
    SettingHour --> SettingMinute : PushButton pressed
    SettingMinute --> [*] : PushButton pressed
}

Uninitialized --> NormalOperation : Time set complete

state NormalOperation {
    [*] --> DisplayTime
    DisplayTime --> AlarmOnOff : RotaryButton pressed
    DisplayTime --> SettingAlarmTime : PushButton pressed
    
    state SettingAlarmTime {
        [*] --> SettingAlarmHour
        SettingAlarmHour --> SettingAlarmMinute : PushButton pressed
        SettingAlarmMinute --> [*] : PushButton pressed
    }
    
    DisplayTime --> AlarmTriggered : Alarm enabled AND time matches
}

state AlarmTriggered {
    [*] --> FlashingRedLED
    FlashingRedLED --> DisplayTime : Any button pressed OR 5 seconds elapsed
}

note right of Uninitialized
    Display shows "--:--"
    Second line prompts to set time
end note

note right of NormalOperation
    Display shows "HH:MM:SS"
    Green LED blinks with seconds
    Yellow LED shows alarm status
end note

note right of SettingAlarmTime
    Display shows "AL:HH:MM"
    Setting process similar to
    initial time setting
end note

note right of AlarmTriggered
    Red LED flashes at 4Hz
    Alarm remains enabled after
    stopping
end note

@enduml